<odoo>
    <data>
        <record id="penalty_form_view" model="ir.ui.view">
            <field name="name">Penalties</field>
            <field name="model">penalty.details</field>
            <field name="arch" type="xml">
                <form string="Penalty Detailes">
                    <header>
                        <button name="action_sumbit" type="object" string="Submit To Manger"
                                groups="hr_overtime-master.base_group_overtime_manager"
                                attrs="{'invisible': ['|','|',('states','=','submit'),('states','=','approved'),('states','=','declined')]}"/>
                        <button name="action_approve" type="object" string="Approve"
                                groups="hr_overtime-master.base_group_overtime_parent_manager"
                                attrs="{'invisible': [('states','in',['declined','approved','new'])]}"/>
                        <button name="action_set_to_declined" type="object" string="Cancel"
                                groups="hr_overtime-master.base_group_overtime_parent_manager,hr_overtime-master.base_group_overtime_manager"
                                attrs="{'invisible': [('states','=','declined')]}"/>
                        <button name="action_set_return_draft" type="object" string="Set To Draft"
                                groups="hr_overtime-master.base_group_overtime_parent_manager"
                                attrs="{'invisible': [('states','=','draft')]}"/>

                        <field name="states" widget="statusbar"/>
                    </header>
                    <sheet>
                        <h1>
                            <field name="seq"/>
                        </h1>
                        <!--<group>-->
                            <!--<h1>-->
                                <!--<field name="name" nolabel="1" width="50px;"-->
                                       <!--attrs="{'readonly': [('states','in',['declined','approved','submit'])]}"/>-->
                            <!--</h1>-->
                        <!--</group>-->
                        <group cols="4" colspan="4">
                            <group>

                                <field name="date"
                                       attrs="{'readonly': [('states','in',['declined','approved','submit'])]}"/>
                                <field name="submit_for"
                                       attrs="{'readonly': [('states','in',['declined','approved','submit'])]}"/>
                                <field name="employee_id"
                                       attrs="{'invisible': [('submit_for', 'in',['department',False])],'readonly': [('states','in',['declined','approved','submit'])],'required':[('submit_for', 'in',['employee'])]}"/>
                                <field name="employee_department"
                                       attrs="{'invisible': [('submit_for', 'in',['department',False])]}"/>
                                <field name="department_id"
                                       attrs="{'invisible': [('submit_for', 'in',['employee',False])],'readonly': [('states','in',['declined','approved','submit'])],'required':[('submit_for', 'in',['department'])]}"/>
                                <field name="allocation"
                                       attrs="{'invisible': [('submit_for', 'in',['employee',False])],'readonly': [('states','in',['declined','approved','submit'])],'required':[('submit_for', 'in',['department'])]}"/>
                            </group>

                            <group>
                                <field name="penalty_term" attrs="{'invisible':[('submit_for', 'in',['department',False])],'readonly': [('states','in',['declined','approved','submit'])],'required':[('submit_for', 'in',['employee'])]}"/>
                                <field name="cash_emp" attrs="{'invisible': ['|',('submit_for', 'in',['department',False]),('penalty_term','in',['days',False])],'readonly': [('states','in',['declined','approved','submit'])]}"/>
                                <field name="cash"
                                       attrs="{'invisible': [('submit_for', 'in',['employee',False])],'readonly': [('states','in',['declined','approved','submit'])]}"/>
                                <field name="days"
                                       attrs="{'invisible': ['|',('submit_for', 'in',['department',False]),('penalty_term','in',['cash',False])],'readonly': [('states','in',['declined','approved','submit'])]}"/>
                                <field name="penalty_reason"
                                       attrs="{'readonly': [('states','in',['declined','approved','submit'])]}"/>
                            </group>
                        </group>
                        <!--<h2>-->
                            <!--<field name="text" attrs="{'invisible': [('submit_for', 'in',['employee',False])]}"/>-->
                        <!--</h2>-->
                        <button name="change_allocation" type="object" string="Get Employee"
                                attrs="{'invisible': [('submit_for', 'in',['employee',False])],'readonly': [('states','in',['declined','approved','submit'])]}"/>
                        <field name="check1" invisible="1"/>
                        <field name="check2" invisible="1"/>
                        <!--<field name="check3"/>-->
                        <notebook>
                            <page string="Employee's Penalties"
                                  attrs="{'invisible': [('submit_for', 'in',['employee',False])],'readonly': [('states','in',['declined','approved','submit'])]}">
                                <field name="employee_ids" widget="many2many"
                                       attrs="{'readonly':[('states','in',['declined','approved','submit'])]}">
                                    <tree editable="bottom" create="0">
                                        <field name="employee_id" readonly="1"/>
                                        <field name="department_id" readonly="1"/>
                                        <field name="penalty"/>
                                    </tree>

                                </field>
                            </page>
                        </notebook>

                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="penalty_tree_view" model="ir.ui.view">
            <field name="name">Penalties</field>
            <field name="model">penalty.details</field>
            <field name="arch" type="xml">
                <tree string="Penalties" decoration-muted="states in ('declined')"
                      decoration-info="states in ('submit','approved')">
                    <field name="seq" string="Name"/>
                    <field name="employee_id"/>
                    <field name="employee_department"/>
                    <field name="department_id"/>
                    <field name="allocation"/>
                    <field name="states" string="state"/>
                </tree>
            </field>
        </record>

        <record id="add_days_in_payroll" model="ir.ui.view">

            <field name="model">hr.payslip</field>
            <field name="inherit_id" ref="hr_payroll.view_hr_payslip_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='name']" position="after">
                    <field name="day_pen" invisible="1"/>
                    <field name="penalty" invisible="1"/>
                    <field name="cash_emp" invisible="1"/>

                </xpath>

            </field>
        </record>

        <record id="penalty_action" model="ir.actions.act_window">
            <field name="name">Penalties</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">penalty.details</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="penalies_menu"
                  name="Penalties"
                  parent="hr.menu_hr_root"
                  action="penalty_action"
                  sequence="20"
        />


    </data>
</odoo>